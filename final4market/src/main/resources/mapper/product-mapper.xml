<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.market.mapper.ProductMapper">
	<!-- ResultMap -->
	<resultMap type="com.market.dto.ProductDTO" id="product">
		<id column="PRODUCT_NO" property="productNo" />
		<result column="MEMBER_ID" property="memberId" />
		<result column="PRODUCT_PRICE" property="productPrice" />
		<result column="PRODUCT_COUNT" property="productCount" />
		<result column="PRODUCT_DATE" property="productDate" />
		<result column="PRODUCT_STATUS" property="productStatus" />
		<result column="PRODUCT_CONTENT" property="productContent" />
		<result column="PRODUCT_SALE" property="productSale" />
		<result column="PRODUCT_TITLE" property="productTitle" />
		<result column="PRODUCT_LIKE" property="productLike" />
		<result column="CATEGORY_NO" property="categoryNo" />
		<result column="DELIVERY_NO" property="deliveryNo" />
	</resultMap>
	
	<resultMap type="com.market.dto.ProductImageDTO" id="productImg">
		<id column="PRODUCT_NO" property="productNo" />
		<result column="PRODUCT_IMAGE_PATH" property="productImagePath" />
	</resultMap>
	
	<resultMap type="com.market.dto.DeliveryDTO" id="delivery">
		<id column="DELIVERY_NO" property="deliveryNo" />
		<result column="DELIVERY_NAME" property="deliveryName"/>
		<result column="TRADE_AREA" property="tradeArea"/>
		<result column="DELIVERY_CHARGE" property="deliveryCharge"/>
	</resultMap>
	
	<resultMap type="com.market.dto.CategoryDTO" id="category">
		<id column="CATEGORY_NO" property="categoryNo" />
		<result column="CATEGORY_NAME" property="categoryName"/>
	</resultMap>
	
	<select id="productImage" parameterType="int" resultMap="productImg">
		select * from product_image where product_no = #{productNo}
	</select>
	
	<select id="productInfo" parameterType="int" resultMap="product">
		SELECT * FROM PRODUCT_VIEW WHERE PRODUCT_NO = #{productNo}
	</select>
	
	<select id="deliveryInfo" parameterType="int" resultMap="delivery">
		select * from delivery_view where product_no = #{productNo}
	</select>
	
	<select id="categoryInfo" parameterType="int" resultMap="category">
		SELECT *
		FROM CATEGORY
		START WITH CATEGORY_NO = #{categoryNo}
		CONNECT BY PRIOR PARENT_CATEGORY_NO = CATEGORY_NO
	</select>
	
	<select id="productNo" parameterType="String">
		select product_no from product where member_id = #{memberId}
	</select>
	
	<select id="sellerProductImage" parameterType="String">
		select PRODUCT_IMAGE_PATH from product_image where product_no = #{productNo}
	</select>
	
	<select id="sellerProductPrice" parameterType="String">
		select product_price from product where product_no = #{productNo}
	</select>
</mapper>






